{% extends 'base.html' %}
{% load static %}

{% block title %} Account Settings {% endblock %}
{% block css_files %}
  <link rel="stylesheet" href="{% static "css/styles.css" %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="header">Account Settings</h1>



  <form id="account-info-form" method="post">
    {% csrf_token %}
    {{ account_form.as_p }}

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li class="alert alert-success">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <button type="submit" id="save-button" class="btn btn-primary mt-2" disabled>Save Changes</button>
    

  </form>
</div>
{% endblock %}

{% block scripts %}
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('account-info-form');
        const saveButton = document.getElementById('save-button');

        const initialData = new FormData(form);

        form.addEventListener('input', function () {
        const currentData = new FormData(form);
        let changed = false;

        for (const [key, value] of currentData.entries()) {
            if (value !== initialData.get(key)) {
            changed = true;
            break;
            }
        }

        saveButton.disabled = !changed;
        });
    });
    </script>
{% endblock %}