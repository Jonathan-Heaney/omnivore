{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Account Settings{% endblock %}

{% block content %}
<div class="container-narrow py-4">
  <h1 class="page-title">Account Settings</h1>

  <!-- Account Info -->
  <section id="account-info" class="card shadow-1 mb-4">
    <div class="card-body">
      <h2 class="h5 mb-3">Account Information</h2>
      <form method="post" id="account-info-form" action="{% url 'account_info_settings' %}">
        {% csrf_token %}
        {{ account_form|crispy }}

        <div id="account-info-message-container">
          {% if messages %}
            <ul class="messages">
              {% for message in messages %}
                {% if 'account' in message.tags %}
                  <li class="alert alert-success mb-2">{{ message }}</li>
                {% endif %}
              {% endfor %}
            </ul>
          {% endif %}
        </div>

        <div class="d-flex gap-2 settings-actions">
          <button type="submit" class="btn btn-save" id="save-account-info" disabled>
            Save Account Info
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Art Delivery -->
  <section id="art-delivery" class="card shadow-1 mb-4">
    <div class="card-body">
      <h2 class="h5 mb-3">Art Delivery</h2>
      <form method="post" id="art-delivery-form" action="{% url 'art_delivery_settings' %}#art-delivery">
        {% csrf_token %}
        {{ art_delivery_form|crispy }}

        <div id="art-delivery-message-container"></div>

        <div class="d-flex gap-2 settings-actions">
          <button type="submit" class="btn btn-save" id="save-art-delivery" disabled>
            Save Art Delivery Preference
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Email Preferences -->
  <section id="email-prefs" class="card shadow-1 mb-4">
    <div class="card-body">
      <h2 class="h5 mb-3">Email Notification Preferences</h2>
      <form method="post" id="email-pref-form" action="{% url 'email_pref_settings' %}#email-prefs">
        {% csrf_token %}
        {{ email_form|crispy }}

        <div id="email-message-container"></div>

        <div class="d-flex gap-2 settings-actions">
          <button type="submit" class="btn btn-save" id="save-email-prefs" disabled>
            Save Email Preferences
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Password Change -->
  <section id="password" class="card shadow-1 mb-4">
    <div class="card-body">
      <h2 class="h5 mb-3">Change Password</h2>
      <form method="post" id="password-form" action="{% url 'password_settings' %}#password">
        {% csrf_token %}
        {{ password_form|crispy }}

        <div id="password-message-container"></div>

        <div class="d-flex gap-2 settings-actions">
          <button type="submit" class="btn btn-save" id="save-password" disabled>
            Change Password
          </button>
        </div>
      </form>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
  <script src="{% static 'js/account_settings.js' %}"></script>
{% endblock %}