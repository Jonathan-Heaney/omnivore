{% extends 'base.html' %}
{% load static %}

{% block title %} My Shared Art {% endblock %}
{% block css_files %}
  <link rel="stylesheet" href="{% static "css/styles.css" %}">
{% endblock %}

{% block content %}

<h1 class="header">My Shared Art</h1>

{% for piece in pieces %}
<div class="card mt-2">
    <div class="card-header"><strong>
      {% if piece.link %}
        <a href="{{piece.link}}" target="_blank"><span class="card-title">{{piece.piece_name}}</span></a>
        {% else %}
        <span class="card-title">{{piece.piece_name}}</span>
        {% endif %}
        </strong></div>
    <div class="card-body d-flex flex-row justify-content-between">
      <div>
        Artist: {{ piece.artist_name }}
        <br>
        <br>
        <p>{{piece.piece_description|linebreaksbr}}</p>
      </div>
      <div>
        <a href="{% url 'edit_art_piece' piece.id %}" class="btn btn-primary edit-btn">Edit</a>
        <form method="post" action="{% url 'delete_art_piece' piece.id %}" onsubmit="return confirmDelete();">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Delete</button>
      </form>
      </div>
    </div>
    <div class="card-footer text-muted">{{piece.created_at}}</div>
  </div>
  {% empty %}
  <p>Nothing shared yet!</p>
{% endfor %}

<script>
  function confirmDelete() {
      return confirm('Are you sure you want to delete this post? This cannot be undone.');
  }
  </script>
{% endblock %}