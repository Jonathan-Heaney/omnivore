{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %} Notifications {% endblock %}
{% block css_files %}
  <link rel="stylesheet" href="{% static "css/styles.css" %}">
{% endblock %}

{% block content %}
<h1 class="header">Your Notifications</h1>

{% if unread_notifications %}
    <div class="unread-container">
      <h4 class="notification-section-heading">Unread</h4>
      <form action="{% url 'mark_all_notifications_read' %}" method="post" class="mb-3">
    {% csrf_token %}
      <button type="submit" class="mark-read-btn">
      Mark all as read
      </button>
    </form>
  </div>
    <ul class="notification-list">
      {% for notification in unread_notifications %}
        <li class="notification-item unread">
          <a href="{% url 'notification_redirect' notification.id %}" class="notification-link">
            <div class="notification-content">
              <span><span class="blue-dot" aria-label="Unread notification">ðŸ”µ</span> {{ notification.message }}</span>
              <span class="notification-timestamp">{{ notification.timestamp|naturaltime }}</span>
            </div>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {% if read_notifications %}
    <h4 class="notification-section-heading">Earlier</h4>
    <ul class="notification-list">
      {% for notification in read_notifications %}
        <li class="notification-item read">
          <a href="{% url 'notification_redirect' notification.id %}" class="notification-link">
            <div class="notification-content">
              <span>{{ notification.message }}</span>
              <span class="notification-timestamp">{{ notification.timestamp|naturaltime }}</span>
            </div>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {% if not unread_notifications and not read_notifications %}
    <p>No notifications yet.</p>
  {% endif %}

{% endblock %}