{% url 'comments_create' as create_url %}
{% with pid=piece.id|stringformat:"s" rid=recipient.id|stringformat:"s" %}
  {% with fallback_target_id="comments-"|add:pid|add:"-"|add:rid|add:"-container" %}
<form method="post"
      action="{{ create_url }}"
      class="comment-form"
      hx-post="{{ create_url }}"
      hx-target="#{{ target_id|default:fallback_target_id }}"
      hx-swap="beforeend"
      hx-on::after-request="clearForm(this)">
  {% csrf_token %}
  <input type="hidden" name="art_piece_id" value="{{ piece.id }}">
  <input type="hidden" name="top_level_comment_id" value="{{ top_level_comment.id }}">

  <div class="input-group comment-input">
    <label class="visually-hidden" for="rf-text-{{ pid }}-{{ rid }}">Reply</label>
    <textarea id="rf-text-{{ pid }}-{{ rid }}"
              name="text"
              rows="1"
              class="form-control replyTextArea input-pill"
              placeholder="Reply to {{ reply_recipient }}..."
              required></textarea>

    <button type="submit" class="sendButton icon-btn" aria-label="Send reply">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M2 21L23 12L2 3V10L17 12L2 14V21Z" />
      </svg>
    </button>
  </div>
</form>
  {% endwith %}
{% endwith %}