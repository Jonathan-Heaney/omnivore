{# templates/main/welcome.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}Welcome{% endblock %}

{% block css_files %}
  {{ block.super }}
  {# Reuse My Received styles so the card looks identical #}
  <link rel="stylesheet" href="{% static 'css/pages/my_received.css' %}">
{% endblock %}

{% block content %}
<div class="container-narrow py-4">
  <header class="mb-4 text-center">
    <h1 class="page-title">Welcome to Omnivore!</h1>
  </header>

  {% if welcome_piece %}
    <p>Hello! This is Jonathan, the creator of Omnivore Arts. I’m so glad you’re here! My hope is that Omnivore feels like a place where you can share what you love, discover something unexpected, and have meaningful conversations about art.

    <p>Each Friday you’ll receive a new piece of art, drawn at random from what the community has shared. Until then, I’d like to offer this first piece as a small welcome gift. Omnivore wouldn’t be the same without you—I can’t wait to see what you’ll share!</p>

    <p>Talk soon, <br>
      Jonathan</p> <br>

    <!-- Same structure/classes as My Received, minus likes & conversation preview -->
    <section id="art-{{ welcome_piece.public_id }}" class="received-card">
      <!-- Header -->
      <header class="received-card__header">
        <div class="received-card__titlewrap">
          <a class="received-card__title" href="{% url 'art_detail' welcome_piece.public_id %}?focus=piece">
            <strong>{{ welcome_piece.piece_name }}</strong>
          </a>
          <span class="received-card__by">({{ welcome_piece.artist_name }})</span>
        </div>

        <div class="received-card__from">
          Shared by <strong>{{ welcome_piece.user.first_name }} {{ welcome_piece.user.last_name }}</strong>
        </div>
      </header>

      <!-- Body -->
      <div class="received-card__body">
        <p class="received-card__description">
          {{ welcome_piece.piece_description|linebreaksbr }}
        </p>

        {% if welcome_piece.link %}
          <a class="btn btn-outline-success btn-sm received-card__source"
             href="{{ welcome_piece.link }}" target="_blank" rel="noopener"
             aria-label="Open source for {{ welcome_piece.piece_name }}">
            View 
            <i class="fa-solid fa-up-right-from-square ms-1" aria-hidden="true"></i>
          </a>
        {% endif %}
      </div>
    </section>

    <p class="small text-muted mt-2">
      This piece has also been added to your
      <a href="{% url 'my_received_art' %}#art-{{ welcome_piece.public_id }}">Received Art</a>
      so you can revisit it later.
    </p>

    <br><br>
    <p class="lead text-muted center">Ready to share something you love?</p>

    <div class="text-center mt-4 d-flex gap-2 justify-content-center">
      <a href="{% url 'share_art' %}" class="btn btn-cta px-4">Share a piece now</a>
    </div>

  {% else %}
    <div class="alert alert-info">
      <p class="mb-1"><strong>Welcome!</strong></p>
      <p class="mb-0">
        We couldn’t find a piece to share with you right now. Check back on your
        <a href="{% url 'my_received_art' %}">My Received Art</a> page soon, or
        <a href="{% url 'share_art' %}">share something you love</a> to kick things off.
      </p>
    </div>
  {% endif %}
</div>
{% endblock %}