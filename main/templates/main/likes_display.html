{% load custom_filters %}

<div id="likes-{{ piece.id }}-container">
    {% with users=likes_dict|dict_get:piece %}
        {% if users %}
            {% if users|length == 1 %}
            ❤️  {{ users.0.get_full_name }}
            {% elif users|length == 2 %}
            ❤️  {{ users.0.get_full_name }}, {{ users.1.get_full_name }}
            {% elif users|length > 2 %}
            ❤️  {{ users.0.get_full_name }}, {{ users.1.get_full_name }}, and
            <a href="#" class="open-modal" data-modal-id="likesModal-{{ piece.id }}">more</a>
            <!-- Modal for more users -->
            <div class="modal" id="likesModal-{{ piece.id }}">
                <div class="modal-content">
                    <span class="close" data-modal-id="likesModal-{{ piece.id }}">&times;</span>
                    <ul>
                        {% for user in users %}
                            <li>{{ user.get_full_name }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% endif %}
        {% endif %}
    {% endwith %}
</div>